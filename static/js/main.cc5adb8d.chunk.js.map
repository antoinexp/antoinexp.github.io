{"version":3,"sources":["ChartWrapper.js","R0Slider.js","GameWorker.js","Animate.js","DashboardViews.js","Dashboard.js","App.js","reportWebVitals.js","index.js"],"names":["props","containerRef","useRef","config","rest","useState","chart","setChart","useEffect","update","ctx","current","Chart","ref","useStyles","makeStyles","theme","root","width","margin","height","spacing","control","padding","marks","value","label","valuetext","setR0","Paper","Typography","id","gutterBottom","Slider","min","max","defaultValue","getAriaValueText","aria-labelledby","step","onChange","event","newValue","valueLabelDisplay","Worker","Animate","fps","draw","that","this","animationFrameId","start","frameCount","startDate","Date","now","lastUpdate","render","elapsedMils","elapsed","frameId","window","requestAnimationFrame","stop","console","log","cancelAnimationFrame","makeConfig","name","type","data","datasets","fill","options","legend","display","title","text","scales","xAxes","yAxes","scaleLabel","labelString","gdp_cfg","ticks","r0_cfg","death","setDeath","gdp","setGDP","R0","gameWorkerRef","setGameWorkerRef","progressRate","setProgressRate","appendData","old_cfg","set_cfg","p","cfg","push","DashboardViews","infected_cfg","IGraphCfg","setIGraphCfg","GDPGraphCfg","setGDPGraphCfg","R0GraphCfg","setR0GraphCfg","gameWorker","GameWorker","onmessage","t","I","GDP","Math","floor","D","progress","y","params","postMessage","Container","maxWidth","Grid","container","direction","justify","alignItems","item","xs","round","LinearProgress","variant","ChartWrapper","R0Slider","HideOnScroll","children","trigger","useScrollTrigger","target","undefined","Slide","appear","in","HideAppBar","Fragment","CssBaseline","AppBar","Toolbar","App","className","Dashboard","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cc5adb8d.chunk.js","sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\n\nimport Chart from 'chart.js'\n\nexport default props => {\n    const containerRef = useRef(null)\n\n    const { config, ...rest } = props\n\n    const [chart, setChart] = useState();\n\n    useEffect(() => {\n        if (chart) {\n            chart.update();\n        }\n    }, [config]);\n\n    useEffect(() => {\n        var ctx = containerRef.current;\n        setChart(new Chart(ctx, config));\n    }, [])\n\n    return <canvas ref={containerRef} {...rest} />\n}","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport Paper from '@material-ui/core/Paper';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: 300,\n    },\n    margin: {\n        height: theme.spacing(3),\n    },\n\n    control: {\n        padding: theme.spacing(2),\n    },\n}));\n\nconst marks = [\n    {\n        value: 0.1,\n        label: '0.1',\n    },\n    {\n        value: 1.,\n        label: '1.0',\n    },\n    {\n        value: 2.,\n        label: '2.0',\n    },\n    {\n        value: 3.0,\n        label: '3.0',\n    },\n];\n\nfunction valuetext(value) {\n    return `R0=${value}`;\n}\n\n\nexport default (props) => {\n    const classes = useStyles();\n\n    const { setR0, ...rest } = props\n\n    const handleSliderChange = (event, newValue) => {\n        setR0(newValue);\n    };\n\n    return (\n        <Paper>\n            <div>\n                <Typography id=\"discrete-slider-always\" gutterBottom>\n                    R0\n            </Typography>\n                <Slider\n                    min={0.1}\n                    max={3.}\n                    defaultValue={3.}\n                    getAriaValueText={valuetext}\n                    aria-labelledby=\"discrete-slider-always\"\n                    step={0.1}\n                    marks={marks}\n                    onChange={handleSliderChange}\n                    valueLabelDisplay=\"on\"\n                />\n            </div>\n        </Paper>\n    );\n}\n","export default function() {\n  return new Worker(__webpack_public_path__ + \"static/js/GameWorker.d51083a3.worker.js\");\n}\n","function Animate(fps, draw) {\n    var that = this;\n\n    that.animationFrameId = 0;\n\n    that.start = () => {\n        let frameCount = 0\n        let animationFrameId\n\n        const startDate = Date.now()\n        var lastUpdate = startDate\n\n        function render() {\n            var now = Date.now()\n            var elapsedMils = now - lastUpdate\n\n            if (elapsedMils >= (1000 / fps)) {\n                frameCount++;\n                if (draw) {\n                    draw({\n                        elapsed: now - startDate,\n                        frameId: frameCount,\n                    })\n                }\n                lastUpdate = now - elapsedMils % (1000 / fps)\n            }\n            that.animationFrameId = window.requestAnimationFrame(render)\n        }\n        render()\n\n        return that\n    }\n\n\n    that.stop = () => {\n        console.log(that.animationFrameId)\n        window.cancelAnimationFrame(that.animationFrameId)\n    }\n\n}\n\nexport default Animate","function makeConfig(name) {\n    return {\n        type: 'line',\n        data: {\n            datasets: [{\n                label: 'Filled',\n                data: [],\n                fill: true,\n            }]\n        },\n        options: {\n            legend: {\n                display: false\n            },\n            title: {\n                display: true,\n                text: name\n            },\n            scales: {\n                xAxes: [{\n                    display: true,\n                    type: 'time',\n                }],\n                yAxes: [{\n                    display: true,\n                    scaleLabel: {\n                        display: true,\n                        labelString: 'Value'\n                    }\n                }]\n            }\n        }\n    };\n}\n\nvar gdp_cfg = makeConfig(\"GDP\");\ngdp_cfg.options.scales.yAxes[0].ticks = {\n    min: -20,\n    max: 0.\n}\n\nvar r0_cfg = makeConfig(\"R0\");\nr0_cfg.options.scales.yAxes[0].ticks = {\n    min: 0,\n    max: 4\n}\n\nexport default {\n    \"infected_cfg\": makeConfig(\"Infected\"),\n    \"gdp_cfg\": gdp_cfg,\n    \"r0_cfg\": r0_cfg,\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport Radio from '@material-ui/core/Radio';\nimport Paper from '@material-ui/core/Paper';\nimport ChartWrapper from \"./ChartWrapper\";\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nimport R0Slider from \"./R0Slider\";\nimport { useState } from 'react'\n\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport GameWorker from 'worker-loader!./GameWorker.js';\n\nimport { useRef, useEffect } from 'react'\nimport Animate from \"./Animate\"\n\nimport DashboardViews from \"./DashboardViews\"\n\nexport default (props) => {\n    const [death, setDeath] = useState(0);\n    const [gdp, setGDP] = useState(0);\n\n    const [R0, setR0] = useState(3.);\n    const [gameWorkerRef, setGameWorkerRef] = useState();\n    const [progressRate, setProgressRate] = useState(0.);\n\n    function appendData(old_cfg, set_cfg, p) {\n        var cfg = { ...old_cfg };\n        cfg.data.datasets[0].data.push(p);\n        set_cfg(cfg);\n    }\n\n    const [IGraphCfg, setIGraphCfg] = useState(DashboardViews.infected_cfg);\n    const [GDPGraphCfg, setGDPGraphCfg] = useState(DashboardViews.gdp_cfg);\n    const [R0GraphCfg, setR0GraphCfg] = useState(DashboardViews.r0_cfg);\n\n    useEffect(() => {\n        let gameWorker = (new GameWorker());\n        setGameWorkerRef(gameWorker);\n\n        gameWorker.onmessage = (event) => {\n            const t = event.data.t;\n            const I = event.data.I;\n            const GDP = event.data.GDP;\n            const R0 = event.data.R0;\n            setDeath(Math.floor(event.data.D));\n            setProgressRate(100 * event.data.progress);\n            setGDP(GDP);\n\n            appendData(IGraphCfg, setIGraphCfg, { t: t, y: I });\n            appendData(GDPGraphCfg, setGDPGraphCfg, { t: t, y: 100 * GDP });\n            appendData(R0GraphCfg, setR0GraphCfg, { t: t, y: R0 });\n        };\n\n        var animation = new Animate(1, params => {\n            gameWorker.postMessage('getdata');\n        });\n\n        return animation.start().stop\n    }, []);\n\n\n    useEffect(() => {\n        if (gameWorkerRef) {\n            gameWorkerRef.postMessage({ \"R0\": R0, \"msg\": \"setR0\" })\n        }\n    }, [R0]);\n\n    return (\n        <Container maxWidth=\"sm\">\n            <Grid container direction=\"column\"\n                justify=\"flex-start\"\n                alignItems=\"stretch\"\n                spacing={3}\n            >\n                <Grid item xs={12}>\n                    <Grid container justify=\"center\" spacing={2}\n                        alignItems=\"stretch\">\n                        <Grid item>\n                            <Paper>\n                                GDP: {Math.round(100 * gdp, 2)}%\n                            </Paper>\n                        </Grid>\n                        <Grid item>\n                            <Paper>\n                                Death Toll: {death}\n                            </Paper>\n                        </Grid>\n                    </Grid>\n                </Grid>\n\n                <Grid item>\n                    <Paper>\n                        <LinearProgress variant=\"determinate\" value={progressRate} />\n                    </Paper>\n                </Grid>\n                <Grid item>\n                    <Paper>\n                        <ChartWrapper config={IGraphCfg} width={100} height={50} />\n                    </Paper>\n                </Grid>\n                <Grid item>\n                    <Paper>\n                        <ChartWrapper config={GDPGraphCfg} width={100} height={50} />\n                    </Paper>\n                </Grid>\n                <Grid item>\n                    <Paper>\n                        <ChartWrapper config={R0GraphCfg} width={100} height={30} />\n                    </Paper>\n                </Grid>\n                <Grid item>\n                    <R0Slider setR0={setR0} />\n                </Grid>\n            </Grid>\n        </Container >\n    );\n}  ","import './App.css';\nimport React from 'react';\nimport Dashboard from \"./Dashboard\";\n\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport useScrollTrigger from '@material-ui/core/useScrollTrigger';\nimport Box from '@material-ui/core/Box';\nimport Container from '@material-ui/core/Container';\nimport Slide from '@material-ui/core/Slide';\n\nfunction HideOnScroll(props) {\n  const { children, window } = props;\n  // Note that you normally won't need to set the window ref as useScrollTrigger\n  // will default to window.\n  // This is only being set here because the demo is in an iframe.\n  const trigger = useScrollTrigger({ target: window ? window() : undefined });\n\n  return (\n    <Slide appear={false} direction=\"down\" in={!trigger}>\n      {children}\n    </Slide>\n  );\n}\n\nHideOnScroll.propTypes = {\n  children: PropTypes.element.isRequired,\n  window: PropTypes.func,\n};\n\nfunction HideAppBar(props) {\n  return (\n    <React.Fragment>\n      <CssBaseline />\n      <HideOnScroll {...props}>\n        <AppBar>\n          <Toolbar>\n            <Typography variant=\"h6\">Covid Simulator</Typography>\n          </Toolbar>\n        </AppBar>\n      </HideOnScroll>\n      <Toolbar />\n    </React.Fragment>\n  );\n}\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <HideAppBar />\n        <Dashboard />\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}