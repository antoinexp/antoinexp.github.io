(this.webpackJsonptuner=this.webpackJsonptuner||[]).push([[0],[,,,,,,,function(e,t,n){e.exports=n(15)},,,,,function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(5),o=n.n(i),l=(n(12),n(1)),c=(n(13),n(14),n(6));function s(e){var t=this;t.data=e.data.slice();var n=e.deltaFreq,a=e.fftSize;t.amp=function(e){var r=Math.max(0,Math.floor(e/n)),i=Math.min(r+1,a);if(r===i)return t.data[r];var o=r*n,l=i*n;return(t.data[r]+(t.data[i]-t.data[r])*(e-o)/(l-o))/255},t.mean=function(e,n){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=100,i=0,o=0,l=1;l<=r;l++){var c=e+l/r*(n-e);i+=t.amp(c)*(1/r)}if(!(i>a))return-1;for(l=1;l<=r;l++){var s=e+l/r*(n-e);o+=s*t.amp(s)*(1/r)/i}return o},t.fmax=function(){var e=Math.max.apply(Math,Object(c.a)(t.data)),a=t.data.indexOf(e);return t.data[a]*n},t.getFreq=function(e){return 440*Math.pow(2,e/12-3.75)},t.getNote=function(e){return 12*(Math.log2(e/440)+.75+3)},t.iterate=function(e){t.data.forEach((function(a,r){var i=r*n,o=t.getNote(i);e(r,i,o,a/255)}))}}var u=new function(){var e=this;this.data=null,navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.fftSize=Math.pow(2,15);var n=new AudioContext;e.bitRate=n.sampleRate,e.deltaFreq=e.bitRate/e.fftSize;var a=n.createMediaStreamSource(t),r=n.createAnalyser();r.fftSize=e.fftSize,r.smoothingTimeConstant=.95,a.connect(r),setInterval((function(t){var n=new Uint8Array(r.frequencyBinCount);r.getByteFrequencyData(n),e.data=n.slice()}),1e3/30)})),e.getData=function(){if(e.data)return new s(e)}};var f=function(e,t){var n=this;n.animationFrameId=0,n.start=function(){var a=0,r=Date.now(),i=r;return function o(){var l=Date.now(),c=l-i;c>=1e3/e&&(a++,t&&t(l-r,a),i=l-c%(1e3/e)),n.animationFrameId=window.requestAnimationFrame(o)}(),n},n.stop=function(){console.log("closing"),console.log(n.animationFrameId),window.cancelAnimationFrame(n.animationFrameId)}};function h(){var e=new Array(61).fill(0),t=new Array(61).fill(-1e4),n=new Array(61).fill(0);this.update=function(a,r){for(var i=0;i<61;i++){var o=r.getFreq(i),l=r.amp(o);l<.7?n[i]=0:0==n[i]?(n[i]=1,t[i]=a):1==n[i]?l<e[i]&&(n[i]=2):2==n[i]&&l>e[i]&&(n[i]=1,t[i]=a),e[i]=l}},this.get=function(a){return{lastNoteAmp:e[a],lastPinched:t[a],noteStates:n[a]}}}var d=function(e){var t=Object(a.useRef)(null),n=Object.assign({},e);return Object(a.useEffect)((function(){console.log("init",t);var e=t.current,n=e.getContext("2d");!function(e){var t=e.getBoundingClientRect(),n=t.width,a=t.height;(e.width!==n||e.height!==a)&&(e.width=n,e.height=a)}(e),n.beginPath(),n.rect(20,20,150,100),n.stroke();var a=new h;return new f(60,(function(t,r){if(n.clearRect(0,0,e.width,e.height),u.data){var i=u.getData();["do","do#","r\xe9","r\xe9#","mi","fa","fa#","sol","sol#","la","la#","si"].forEach((function(t,a){for(var r=1;r<=5;r++){var i=440*Math.pow(2,-3.75+r+a/12);n.beginPath();var o=e.width*(a+12*(r-1))/48;n.moveTo(o,40),n.lineTo(o,e.height),n.stroke(),n.textAlign="center",n.fillText(t,o,10),n.fillText(r,o,20),n.fillText(Math.floor(i),o,30),4==a&&1==r?n.fillText("E",o,100):9==a&&1==r?n.fillText("A",o,100):2==a&&2==r?n.fillText("D",o,100):7==a&&2==r?n.fillText("G",o,100):11==a&&2==r?n.fillText("B",o,100):4==a&&3==r&&n.fillText("E",o,100)}})),n.beginPath(),n.moveTo(0,e.height),i.iterate((function(t,a,r,i){var o=Math.floor(r/12),l=r%12;if(1<=o<=5){var c=e.width*(l+12*(o-1))/48,s=i;n.lineTo(c,e.height-s*(e.height-40))}})),n.stroke(),a.update(t,i);for(var o=0;o<=48;o++){var l=a.get(12+o);n.beginPath();var c=e.width*o/48;n.textAlign="center",n.fillText(l.noteStates,c,40),(t-l.lastPinched)/1e3<=.5&&(n.strokeStyle="#FF0000",n.lineWidth=3,n.moveTo(c,40),n.lineTo(c,e.height),n.stroke(),n.strokeStyle="#000000",n.lineWidth=1)}}})).start().stop}),[t]),r.a.createElement("canvas",Object.assign({ref:t},n))};var g=[[0,3,2,2],[2,1,0,2],[4,1,0,2],[6,2,0,2],[8,3,4,2],[10,3,4,2],[12,3,4,2],[14,3,4,1],[15,2,0,1],[16,3,2,2],[18,1,0,2],[20,1,0,2],[22,2,0,2],[24,3,4,2],[26,3,4,2],[28,3,4,2],[30,3,4,1],[31,2,0,1],[32,3,2,2],[34,1,0,2],[36,1,0,2],[38,2,0,2],[40,3,4,2],[42,3,4,2],[44,3,4,2],[46,3,4,1],[47,2,0,1],[48,3,2,2],[50,1,0,2],[52,1,0,2],[54,2,0,2],[56,3,4,6],[64,4,2,6],[64,5,0,6],[72,3,7,6],[72,4,5,6],[80,3,5,6],[80,4,3,6],[88,3,7,6],[88,4,5,6],[96,4,2,6],[96,5,0,6],[104,3,7,6],[104,4,5,6],[112,3,5,6],[112,4,3,6],[120,3,7,6],[120,4,5,6],[128,3,2,2],[130,1,0,2],[132,1,0,2],[134,2,0,2],[136,3,4,2],[138,3,4,2],[140,3,4,2],[142,3,4,1],[143,2,4,1],[144,3,2,2],[146,1,0,2],[148,1,0,2],[150,2,0,2],[152,3,4,2],[154,3,4,2],[156,3,4,2],[158,3,4,1],[159,2,4,1],[160,3,2,2],[162,1,0,2],[164,1,0,2],[166,2,0,2],[168,3,4,2],[170,3,4,2],[172,3,4,2],[174,3,4,1],[175,2,4,1],[176,3,2,2],[178,1,0,2],[180,1,0,2],[182,2,0,2],[184,3,4,6],[192,4,2,6],[192,5,0,6],[200,4,5,6],[200,5,3,6],[208,3,7,6],[208,4,5,6],[216,3,5,4],[216,4,3,4],[220,3,5,1],[220,4,3,1],[222,3,7,1],[222,4,5,1],[224,4,2,6],[224,5,0,6],[232,4,5,6],[232,5,3,6],[240,3,7,6],[240,4,5,6],[248,3,5,4],[248,4,3,4],[252,3,5,1],[252,4,3,1],[254,3,4,1],[254,4,2,1]];function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.getContext("2d"),i=e.width,o=e.height,l=a?0:Math.floor(n/2),c=0,s=8;this.resizeCanvasToDisplaySize=function(){var t=e.getBoundingClientRect(),n=t.width,a=t.height;return(e.width!==n||e.height!==a)&&(e.width=n,e.height=a,i=n,o=a,!0)};var u=function(){var e=a?c/n:.5;r.beginPath(),r.globalAlpha=.5,r.roundRect(i*e,0,10,o,[10]),r.fill(),r.stroke(),r.globalAlpha=1},f=function(){for(var e=i*(-c%n)/n,t=0;t<=5;t++)r.beginPath(),r.moveTo(-i+e,10+t/5*(o-20)),r.lineTo(-i+e+3*i,10+t/5*(o-20)),r.stroke();var a=Math.max(0,Math.floor((c-l)/s)),u=Math.floor((n-l+c)/s);for(t=a;t<=u;t++){var f=i*(t*s-c+l)/n;r.setLineDash([5,2]),r.beginPath(),r.moveTo(f,10),r.lineTo(f,o-10),r.stroke(),r.setLineDash([0]),t%2==0&&(r.beginPath(),r.globalAlpha=.1,r.rect(f,10,s*i/n,o-20,[10]),r.fill(),r.globalAlpha=1)}},h=function(e,t,s){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,h=(e-c+l)/n;if(!(h<-.2||h>1.2)){var d=2,g=a?1:10,v=i*h,m=10+t/5*(o-20),p=r.createLinearGradient(v-d,m-g,v-d,m+g);p.addColorStop(0,"red"),p.addColorStop(1,"white");var w=r.createLinearGradient(v-d,m-g,v-d,m+g);w.addColorStop(0,"green"),w.addColorStop(1,"white");var b=r.createLinearGradient(v-d,m-g,v-d,m+g);b.addColorStop(0,"grey"),b.addColorStop(1,"white"),r.beginPath(),r.rect(v+d,m-g,u*(i/n)-2*d,2*g),1==f?(r.fillStyle=w,r.strokeStyle="#00AA00"):0==f?(r.fillStyle=b,r.strokeStyle=a?"#000000":"#AAAAAA"):(r.fillStyle=p,r.strokeStyle="#FF0000"),r.fill(),r.stroke(),r.fillStyle="#000000",r.strokeStyle="#000000",r.textAlign="center",r.textBaseline="middle",r.beginPath(),a||r.fillText(s,.5*(u*(i/n)-2*d)+v+d,m)}};this.render=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;a||(c=n),r.beginPath(),r.clearRect(0,0,e.width,e.height),f(),t.iterate((function(e,t){h(e,t.stringId,t.fret,t.tempo,t.success)})),a&&(c=n),u(),a&&(c=0)},this.showScore=function(){var e=t.getScore();r.textAlign="right",r.fillText("Score: "+e[0]+" / "+e[1],i,20)}}function m(){var e={},t=g.length,n=0;g.forEach((function(t){var n=Object(l.a)(t,4),a=n[0],r=n[1],i=n[2],o=n[3];a in e||(e[a]=[]),e[a].push({stringId:r,fret:i,tempo:o,success:0})})),this.checkNote=function(t,a,r){a in e&&e[a].forEach((function(i,o){var l=0;0==i.stringId?l=28:1==i.stringId?l=23:2==i.stringId?l=19:3==i.stringId?l=14:4==i.stringId?l=9:5==i.stringId&&(l=4),l+=12+i.fret;var c=r.get(l),s=(t-c.lastPinched)/1e3;-1.5<=s&&s<=1.5?(console.log("Good!",s),e[a][o].success=1,n+=1):(console.log("missed",s),console.log(l,t,r.get(l)),e[a][o].success=-1)}))},this.iterate=function(t){var n=function(n){e[n].forEach((function(e,a){t(n,e,a)}))};for(var a in e)n(a)},this.resetSuccess=function(){for(var t in e)e[t].forEach((function(e,t){e.success=0}));n=0},this.getScore=function(){return[n,t]}}CanvasRenderingContext2D.prototype.roundRect=function(e,t,n,a,r){return n<2*r&&(r=n/2),a<2*r&&(r=a/2),this.beginPath(),this.moveTo(e+r,t),this.arcTo(e+n,t,e+n,t+a,r),this.arcTo(e+n,t+a,e,t+a,r),this.arcTo(e,t+a,e,t,r),this.arcTo(e,t,e+n,t,r),this.closePath(),this};var p=function(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null),i=Object(a.useState)("no"),o=Object(l.a)(i,2),c=(o[0],o[1],Object.assign({},e),Object(a.useState)(!1)),s=Object(l.a)(c,2),d=s[0],g=s[1],p=Object(a.useState)(3),w=Object(l.a)(p,2),b=w[0],S=w[1];return Object(a.useEffect)((function(){console.log("init",t);var e=new m,a=new h,r=t.current,i=new v(r,e),o=new v(n.current,e,254,!0);return i.resizeCanvasToDisplaySize(),o.resizeCanvasToDisplaySize(),r.lastTime=0,r.currentNote=-8,r.play=!1,r.speed=b,r.tabManager=e,new f(1e5,(function(t,n){var l=u.getData();if(l&&a.update(t,l),r.play){var c=r.currentNote+r.speed*(t-r.lastTime)/1e3,s=Math.floor(c-.5);s!=Math.floor(r.currentNote-.5)&&e.checkNote(t,s,a),r.currentNote=c}r.lastTime=t,i.render(r.currentNote),i.showScore(),o.render(r.currentNote)})).start().stop}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("canvas",{ref:t,width:"800px",height:"200px"}),r.a.createElement("br",null),r.a.createElement("canvas",{ref:n,width:"800px",height:"50px"}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"800px"}},r.a.createElement("button",{onClick:function(){var e=t.current;e.currentNote=8*(Math.floor(e.currentNote/8)-1),e.tabManager.resetSuccess()}}," ","<<"," "),r.a.createElement("button",{onClick:function(){t.current.play=!d,g(!d)}},d?"Stop":"Play"),r.a.createElement("button",{onClick:function(){var e=t.current;e.currentNote=8*(Math.floor(e.currentNote/8)+1),e.tabManager.resetSuccess()}}," ",">>"," ")),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",width:"800px"}},r.a.createElement("br",null),r.a.createElement("input",{id:"typeinp",type:"range",min:"1",max:"10",defaultValue:b,step:"1",onChange:function(e){var n=t.current,a=e.target.value;n.speed=a,S(a)}}),r.a.createElement("p",null,"Speed x",b))))};var w=function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2);return t[0],t[1],Object(a.useEffect)((function(){})),r.a.createElement("div",null,r.a.createElement(d,{width:"1024px",height:"200px"}),r.a.createElement("br",null),r.a.createElement(p,null),r.a.createElement("br",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[7,1,2]]]);